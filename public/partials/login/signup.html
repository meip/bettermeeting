<div class="container-fluid" id="create-meeting">
    <div class="container" ng-controller="CreateMeetingNewCtrl as cmc">
        <div class="colorbar" ng-class="cmc.meeting.color">&nbsp;</div>
        <div class="content meeting">
            <form ng-submit="cmc.publishMeeting()" name="meetingForm">
                <div class="page-header">
                    <div class="meeting-header-goal row">
                        <input type="text" placeholder="Meetinggoal" class="form-control" ng-model="cmc.meeting.goal" required
                               popover="What do you want to achieve with this meeting?"  popover-trigger="focus">
                    </div>
                    <div class="meeting-header-information row">
                        <div class="col-md-6">
                            <input type="email" placeholder="Organisator" class="form-control" ng-model="cmc.meeting.organizer" required
                                   popover="Who is the organizer of the meeting?"  popover-trigger="focus">

                        </div>
                        <div class="col-md-6">
                            <input type="text" placeholder="Time" class="form-control" ng-model="cmc.meeting.date" style="text-align: right" name="Time" required
                                   popover="When is the meeting going to start?"  popover-trigger="focus">
                        </div>
                    </div>
                    <div  class="meeting-header-attendees row">
                        <h5>Attendees:</h5>
                        <div class="col-md-4 col-sm-12 attendee" ng-repeat="attendee in cmc.meeting.attendees track by $index">
                            <div class="input-group">
                                <input type="email" class="form-control" placeholder="Attendee"  ng-model="cmc.meeting.attendees[$index]">
                            <span class="input-group-btn">
                                <button class="btn btn-danger" type="button" ng-click="cmc.removeAttendee($index)"><span class="glyphicon glyphicon-remove"></span></button>
                            </span>
                            </div>
                        </div>
                        <div class="col-sm-1" style="padding: 0px;">
                            <button type="button" class="btn btn-primary" ng-click="cmc.addAttendee()"><span class="glyphicon glyphicon-plus"></span></button>
                        </div>
                    </div>
                </div>
                <div class="row meeting-decisions">
                    <h5>Decisions</h5>
                    <div class="col-xs-11" ng-repeat="decision in cmc.meeting.decisions track by $index">
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="Decision"  ng-model="cmc.meeting.decisions[$index]">
                            <span class="input-group-btn">
                                <button class="btn btn-danger" type="button" ng-click="cmc.removeDecision($index)"><span class="glyphicon glyphicon-remove"></span></button>
                            </span>
                        </div>
                    </div>
                    <div class="col-xs-1" style="padding: 0px;">
                        <button type="button" class="btn btn-primary" ng-click="cmc.addDecision()"><span class="glyphicon glyphicon-plus"></span></button>
                    </div>
                </div>
                <div class="row meeting-todos">
                    <h5>ToDos</h5>
                    <table class="table table-striped table-hover">
                        <thead>
                        <tr>
                            <th>Note</th>
                            <th>Owner</th>
                            <th>Due</th>
                            <th>&nbsp;</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="todo in cmc.meeting.todos track by $index">
                            <td class="todo-note">
                                <input type="text" class="form-control" placeholder="Note" ng-model="todo.note" required>
                            </td>
                            <td class="todo-owner">
                                <input type="email" class="form-control" placeholder="Owner"ng-model="todo.owner" ng-focus="cmc.showAttendees()">
                                <div class="popup-test">
                                    Robin
                                </div>
                            </td>
                            <td class="todo-due">
                                <input type="text" class="form-control" placeholder="Due Date" ng-model="todo.date">
                            </td>
                            <td class="delete" ng-click="cmc.removeTodo($index)"><button class="btn btn-danger" type="button"><span class="glyphicon glyphicon-remove"></span></button></td>
                        </tr>
                        </tbody>
                    </table>
                    <button type="button" class="btn btn-primary" ng-click="cmc.addTodo()"><span class="glyphicon glyphicon-plus"></span> Add Todo</button>
                </div>
                <div class="meeting-footer">
                    <div class="row">
                        <div class="col-xs-12">
                            <button type="submit" class="btn btn-primary"><span class="glyphicon glyphicon-send"></span> Publish</button>
                            <a href="/" class="btn btn-warning"><span class="glyphicon glyphicon-step-backward"></span> Back</a>
                            <button type="button" class="btn btn-danger" ng-click="cmc.removeMeeting(cmc.meeting._id.oid, true)"><span class="glyphicon glyphicon-trash"></span> Delete</button>
                        </div>
                    </div>
                </div>
            </form>
            <hr />
            <h4>Debug:</h4>
            <pre>{{ cmc.meeting | json }}</pre>

        </div>
    </div>
</div>